<div class = "table">
    <div class = "table_container">
      <mat-table #table [dataSource]="dataSource" matSort>
  
        <!-- Position Column -->
        <ng-container matColumnDef="id">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Id </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
        </ng-container>



        <!-- Organization column -->
        <ng-container *ngIf="isOrganization" matColumnDef="main_account">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Main Account </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.main_account}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isOrganization" matColumnDef="number_of_user">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Number of users </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.number_of_user}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isUser" matColumnDef="updated_at">
              <mat-header-cell *matHeaderCellDef mat-sort-header> last Activity </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.last_activity_date}} </mat-cell>
        </ng-container>



          <!-- User column -->

        <ng-container *ngIf="isUser" matColumnDef="company_name">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Company name </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.organisation}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isUser" matColumnDef="email_address">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Email address </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.email_address}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isUser" matColumnDef="role">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Role </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.role}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isUser" matColumnDef="related_environment">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Related environment </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.related_environment}} </mat-cell>
        </ng-container>


        <!-- Environment column -->
        <!--<ng-container *ngIf="isEnvironment" matColumnDef="environment_name">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Envionment name </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
        </ng-container>-->
        <ng-container *ngIf="isEnvironment" matColumnDef="vm_count">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Number of VM </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.vm_count}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isEnvironment" matColumnDef="tier_count">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Number of tier </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.tier_count}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isEnvironment" matColumnDef="total_cost">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Total Cost </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.total_cost}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isEnvironment || isContract" matColumnDef="created_at">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Contract Started </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.created_at}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isEnvironment || isContract" matColumnDef="contract_ended">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Contract ended </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.contract_ended}} </mat-cell>
        </ng-container>
        
        
        
        
        <!-- Contract column -->
        <ng-container *ngIf="isContract || isBill || isRequest" matColumnDef="environment_name">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Envionment name </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.environment_name}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="isContract" matColumnDef="signed_by">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Signed By</mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.signed_by}} </mat-cell>
        </ng-container>

        <!-- Bill column -->
        <ng-container *ngIf="isBill" matColumnDef="paid_by">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Paid By</mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.paid_by}} </mat-cell>
        </ng-container>        

        <ng-container *ngIf="isBill" matColumnDef="payment_date">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Paid At</mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.paid_at}} </mat-cell>
        </ng-container>        


        <!-- Request Column -->
        <ng-container *ngIf="isRequest" matColumnDef="request_by">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Request By</mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.request_by}} </mat-cell>
        </ng-container>        

        <ng-container *ngIf="isRequest" matColumnDef="request_at">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Request At</mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.request_at}} </mat-cell>
        </ng-container>      

        <ng-container *ngIf="isRequest" matColumnDef="status">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Status</mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.status}} </mat-cell>
        </ng-container>      
        <ng-container *ngIf="isRequest" matColumnDef="read_status">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Read Status</mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.read_status}} </mat-cell>
        </ng-container>      


        <!-- Name Column -->
        <ng-container *ngIf="!isRequest" matColumnDef="name">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
        </ng-container>

    
        <!-- Weight Column -->
        <ng-container matColumnDef="weight">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Weight </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.weight}} </mat-cell>
        </ng-container>
    
        <!-- Symbol Column -->
        <ng-container matColumnDef="symbol">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Symbol </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.symbol}} </mat-cell>
        </ng-container>
    
        <mat-header-row class = "table_header" *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row (click) = selectRow(row) *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>

    </div>
    
</div>